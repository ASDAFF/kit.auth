BX.namespace("BX.Sale.PersonalOrderComponent"),function(){"use strict";var t=function(t){var e;function a(a){e=a.target;var i=document.getElementsByClassName(e.getAttribute("data-table"));t.forEach.call(i,function(e){t.forEach.call(e.tBodies,function(e){t.forEach.call(e.rows,n)})})}function n(t){var a=t.textContent.toLowerCase(),n=e.value.toLowerCase();t.style.display=-1===a.indexOf(n)?"none":"table-row"}return{init:function(){var e=document.getElementsByClassName("input-search");t.forEach.call(e,function(t){t.oninput=a})}}}(Array.prototype);document.addEventListener("readystatechange",function(){"complete"===document.readyState&&t.init()}),window.B2bOrderDetail=function(t){this.ajaxUrl=t.ajaxUrl,this.paymentList=t.paymentList,this.changePayment=t.changePayment,this.changePaymentWrapper=t.changePaymentWrapper,this.templateName=t.TemplateName,window.changePaymentTemplateName=this.templateName,this.destroy(),this.init()},window.B2bOrderDetail.prototype.destroy=function(){},window.B2bOrderDetail.prototype.init=function(){$(document).on("click",this.changePayment,this,this.clickchangePayment)},window.B2bOrderDetail.prototype.clickchangePayment=function(t){var e=t.data;BX.ajax({method:"POST",dataType:"html",url:e.ajaxUrl,data:{sessid:BX.bitrix_sessid(),orderData:e.paymentList[$(this).attr("id")],templateName:window.changePaymentTemplateName},onsuccess:BX.proxy(function(t){$(e.changePaymentWrapper).html(t),$(this).hide()},this),onfailure:BX.proxy(function(){return this},this)},this)},$(document).on("click","#excel-button-export",function(){!function(t){BX.showWait();var e="";$.ajax({type:"POST",async:!1,url:"/include/ajax/personal_order_excel_export.php",data:{orderId:t,file:e},success:function(t){e=t}});var a=new Date,n=a.getDate();n<10&&(n="0"+n);var i=a.getMonth()+1;i<10&&(i="0"+i);var r=a.getHours();r<10&&(r="0"+r);var o=a.getMinutes();o<10&&(o="0"+o);var c=a.getSeconds();c<10&&(c="0"+c);var s=1e9*Math.random()-.5;s=Math.round(s);var l="blank_"+a.getFullYear()+"_"+i+"_"+n+"_"+r+"_"+o+"_"+c+"_"+s+".xlsx",d=document.createElement("a");d.setAttribute("href",e),d.setAttribute("download",l);var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(u),BX.closeWait()}(this.dataset.id)})}();